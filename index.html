<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Beranda - Live And Streaming by Nabila Ahmad Studio Development
    </title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/shop-styles.css" />
    <script src="https://unpkg.com/@mux/mux-player"></script>
  </head>
  <body>
    <header class="main-header">
      <div class="container navbar">
        <a href="index.html" class="logo">
          <img src="assets/logo.svg" alt="Nabila Stream Logo" />
          <span>Nabila Stream</span>
        </a>
        <nav>
          <ul class="nav-links">
            <li><a href="index.html" class="active">🏠 Beranda</a></li>
            <li><a href="studio.html">🎬 Studio</a></li>
            <li><a href="posts.html">📝 Posts</a></li>
            <li><a href="chat.html">💬 Chat</a></li>
            <li><a href="shop.html">🛍️ Shop</a></li>
            <li><a href="profile.html">👤 Profil</a></li>
            <li><a href="admin.html">⚙️ Admin</a></li>
          </ul>
        </nav>
        <div class="auth-buttons">
          <div class="user-wallet" id="userWallet" style="display: none">
            <div class="wallet-info">
              <span class="coin-balance"
                >💎 <span id="coinBalance">0</span></span
              >
              <span class="diamond-balance"
                >💍 <span id="diamondBalance">0</span></span
              >
            </div>
          </div>
          <a href="Auth.html" id="loginRegisterBtn" class="btn"
            >Login / Daftar</a
          >
          <div class="user-info" style="display: none" id="userInfo">
            <img
              id="userAvatar"
              class="nav-user-avatar"
              style="display: none"
            />
            <span id="userName" style="display: none"></span>
            <button id="logoutBtn" class="btn" style="display: none">
              Logout
            </button>
          </div>
        </div>
      </div>
    </header>

    <main>
      <section class="hero-section">
        <div class="container">
          <h1>🎥 Temukan Live Streaming Terbaik</h1>
          <p>
            Tonton streamer favoritmu, ikuti konten menarik, dan mulai live-mu
            sendiri sekarang!
          </p>
          <div class="hero-actions">
            <a href="studio.html" class="btn primary"
              >🎬 Mulai Live Sekarang!</a
            >
            <a href="posts.html" class="btn secondary">📝 Buat Post</a>
            <a href="chat.html" class="btn accent">💬 Join Chat</a>
            <a href="shop.html" class="btn success">🛍️ Virtual Shop</a>
          </div>
        </div>
      </section>

      <section class="container">
        <h2>🔴 Live Streaming yang Sedang Berlangsung</h2>
        <div class="stream-grid" id="liveStreamsContainer">
          <!-- Live streams akan dimuat di sini -->
        </div>
        <p
          id="noStreamsMessage"
          style="text-align: center; color: var(--text-dark); display: none"
        >
          Belum ada live stream yang aktif saat ini.
          <a href="studio.html">Mulai live pertama!</a>
        </p>
      </section>

      <section class="container" style="margin-top: 50px">
        <h2>📝 Post Terbaru dari Komunitas</h2>
        <div id="recentPostsContainer" class="posts-preview">
          <!-- Recent posts akan dimuat di sini -->
        </div>
        <div style="text-align: center; margin-top: 20px">
          <a href="posts.html" class="btn primary">📖 Lihat Semua Posts</a>
        </div>
      </section>

      <section class="container" style="margin-top: 50px">
        <h2>🛍️ Virtual Shop Populer</h2>
        <div class="shop-preview">
          <div class="shop-item-preview">
            <div class="item-icon">💎</div>
            <div class="item-info">
              <h4>Coins Package</h4>
              <p>Mulai dari Rp 500</p>
            </div>
            <a href="shop.html" class="btn small">Beli</a>
          </div>
          <div class="shop-item-preview">
            <div class="item-icon">💍</div>
            <div class="item-info">
              <h4>Diamonds Premium</h4>
              <p>Mulai dari Rp 1,500</p>
            </div>
            <a href="shop.html" class="btn small">Beli</a>
          </div>
          <div class="shop-item-preview">
            <div class="item-icon">🎁</div>
            <div class="item-info">
              <h4>Virtual Gifts</h4>
              <p>Mulai dari Rp 500</p>
            </div>
            <a href="shop.html" class="btn small">Beli</a>
          </div>
          <div class="shop-item-preview">
            <div class="item-icon">👑</div>
            <div class="item-info">
              <h4>VIP Features</h4>
              <p>Mulai dari Rp 15,000</p>
            </div>
            <a href="shop.html" class="btn small">Beli</a>
          </div>
        </div>
        <div style="text-align: center; margin-top: 20px">
          <a href="shop.html" class="btn primary">🛍️ Kunjungi Shop</a>
        </div>
      </section>

      <section class="container" style="margin-top: 50px">
        <h2>📊 Statistik Platform</h2>
        <div class="platform-stats">
          <div class="stat-card">
            <div class="stat-number" id="totalUsers">0</div>
            <div class="stat-label">👥 Total Users</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="liveStreams">0</div>
            <div class="stat-label">🔴 Live Streams</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="totalPosts">0</div>
            <div class="stat-label">📝 Total Posts</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="onlineNow">0</div>
            <div class="stat-label">🟢 Online Now</div>
          </div>
        </div>
      </section>

      <section class="container features-section" style="margin-top: 50px">
        <h2>✨ Fitur Platform</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">🎬</div>
            <h3>Live Streaming</h3>
            <p>Streaming real-time dengan kualitas HD dan fitur interaktif</p>
            <a href="studio.html" class="btn small">Mulai Live</a>
          </div>
          <div class="feature-card">
            <div class="feature-icon">💰</div>
            <h3>Monetisasi</h3>
            <p>Hasilkan uang dari konten dan streaming Anda</p>
            <a href="posts.html" class="btn small">Pelajari</a>
          </div>
          <div class="feature-card">
            <div class="feature-icon">🛍️</div>
            <h3>Virtual Shop</h3>
            <p>Beli coins, diamonds, dan gifts virtual</p>
            <a href="shop.html" class="btn small">Belanja</a>
          </div>
          <div class="feature-card">
            <div class="feature-icon">📢</div>
            <h3>Campaign Boost</h3>
            <p>Promosikan konten Anda ke lebih banyak audience</p>
            <a href="posts.html" class="btn small">Boost</a>
          </div>
        </div>
      </section>
    </main>

    <!-- AI Support Chat Widget -->
    <div id="aiSupportWidget" class="ai-support-widget">
      <div class="support-toggle" id="supportToggle">
        <div class="support-avatar">
          <img
            src="https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=60&h=60&fit=crop&crop=face"
            alt="AI Support"
            class="support-photo"
          />
        </div>
        <div class="support-info">
          <span class="support-name">AI Assistant</span>
          <span class="support-status">🟢 Online 24/7</span>
        </div>
        <div
          class="support-notification"
          id="supportNotification"
          style="display: none"
        >
          1
        </div>
      </div>

      <div class="support-chat" id="supportChat" style="display: none">
        <div class="chat-header">
          <div class="chat-header-info">
            <img
              src="https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=50&h=50&fit=crop&crop=face"
              alt="AI Support"
              class="chat-header-photo"
            />
            <div>
              <h4>🤖 AI Support Assistant</h4>
              <span class="chat-subtitle">24/7 Customer Support</span>
            </div>
          </div>
          <button id="closeSupportChat">&times;</button>
        </div>

        <div class="chat-messages" id="supportMessages">
          <div class="bot-message">
            <div class="message-avatar">
              <img
                src="https://images.pexels.com/photos/8386440/pexels-photo-8386440.jpeg?auto=compress&cs=tinysrgb&w=40&h=40&fit=crop&crop=face"
                alt="AI Support"
              />
            </div>
            <div class="message-content">
              <p>🎉 Selamat datang di Nabila Stream!</p>
              <p>
                Saya AI Assistant yang siap membantu Anda 24/7. Ada yang bisa
                saya bantu?
              </p>
            </div>
          </div>
        </div>

        <div class="chat-quick-replies">
          <button class="quick-reply" data-message="Cara daftar akun">
            📝 Cara Daftar
          </button>
          <button class="quick-reply" data-message="Cara live streaming">
            🎬 Live Streaming
          </button>
          <button class="quick-reply" data-message="Cara beli coins">
            💎 Beli Coins
          </button>
          <button class="quick-reply" data-message="Kontak admin">
            👤 Kontak Admin
          </button>
        </div>

        <div class="chat-input">
          <input
            type="text"
            id="supportInput"
            placeholder="Ketik pesan Anda..."
          />
          <button id="sendSupportMessage">Kirim</button>
        </div>
      </div>
    </div>

    <footer class="main-footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <h4>🏠 Platform</h4>
            <ul>
              <li><a href="index.html">Beranda</a></li>
              <li><a href="studio.html">Live Streaming</a></li>
              <li><a href="posts.html">Content Creation</a></li>
              <li><a href="chat.html">Community Chat</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>🛍️ Shop & Services</h4>
            <ul>
              <li><a href="shop.html">Virtual Shop</a></li>
              <li><a href="posts.html#monetize">Monetization</a></li>
              <li><a href="posts.html#campaign">Campaign Boost</a></li>
              <li><a href="profile.html">Creator Program</a></li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>📞 Support</h4>
            <ul>
              <li>
                <a
                  href="#"
                  onclick="document.getElementById('supportToggle').click()"
                  >AI Assistant</a
                >
              </li>
              <li>
                <a href="https://wa.me/6285810526151" target="_blank"
                  >WhatsApp Admin</a
                >
              </li>
              <li><a href="admin.html">Admin Panel</a></li>
              <li>
                <a href="#" onclick="window.aiSupport?.showHelpResponse?.()"
                  >Help Center</a
                >
              </li>
            </ul>
          </div>
          <div class="footer-section">
            <h4>💰 Payment</h4>
            <ul>
              <li>💳 GoPay: 0895340205302</li>
              <li>📱 WhatsApp: 085810526151</li>
              <li>🏦 Bank Transfer</li>
              <li>🔒 Secure Payment</li>
            </ul>
          </div>
        </div>
        <div class="footer-bottom">
          <p>
            &copy; 2025 Live And Streaming by Nabila Ahmad Studio Development.
            All rights reserved.
          </p>
          <p
            style="margin-top: 10px; font-size: 0.9rem; color: var(--text-dark)"
          >
            🎮 Platform streaming terlengkap untuk kreator Indonesia • 🤖
            Powered by AI Assistant
          </p>
        </div>
      </div>
    </footer>

    <script src="js/auth-enhanced.js"></script>
    <script src="js/ai-support.js"></script>
    <script>
      // Enhanced home page functionality
      document.addEventListener("DOMContentLoaded", () => {
        // Setup logout button
        const logoutBtn = document.getElementById("logoutBtn");
        if (logoutBtn) {
          logoutBtn.addEventListener("click", handleLogout);
        }

        // Load content
        loadLiveStreams();
        loadRecentPosts();
        loadPlatformStats();

        // Refresh live streams every 30 seconds
        setInterval(loadLiveStreams, 30000);

        // Setup quick reply buttons
        setupQuickReplies();
      });

      function setupQuickReplies() {
        document.querySelectorAll(".quick-reply").forEach((btn) => {
          btn.addEventListener("click", () => {
            const message = btn.dataset.message;
            if (window.aiSupport) {
              window.aiSupport.addUserMessage(message);
              setTimeout(() => {
                window.aiSupport.processUserMessage(message);
              }, 500);
            }
          });
        });
      }

      function loadLiveStreams() {
        const container = document.getElementById("liveStreamsContainer");
        const noStreamsMessage = document.getElementById("noStreamsMessage");

        // Get live streams from localStorage
        const streams = JSON.parse(
          localStorage.getItem("nabila_streams") || "[]",
        );
        const liveStreams = streams.filter(
          (stream) => stream.status === "live",
        );

        if (liveStreams.length === 0) {
          // Show sample streams for demonstration
          const sampleStreams = [
            {
              id: "sample1",
              title: "🎮 Gaming Session - Mobile Legends",
              streamer: {
                name: "GamerPro",
                avatar:
                  "https://images.pexels.com/photos/1222271/pexels-photo-1222271.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop&crop=face",
              },
              viewers: 142,
              thumbnail:
                "https://images.pexels.com/photos/442576/pexels-photo-442576.jpeg?auto=compress&cs=tinysrgb&w=350&h=200&fit=crop",
            },
            {
              id: "sample2",
              title: "🎵 Music Live - Acoustic Session",
              streamer: {
                name: "MusicLover",
                avatar:
                  "https://images.pexels.com/photos/1587009/pexels-photo-1587009.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop&crop=face",
              },
              viewers: 89,
              thumbnail:
                "https://images.pexels.com/photos/1190297/pexels-photo-1190297.jpeg?auto=compress&cs=tinysrgb&w=350&h=200&fit=crop",
            },
            {
              id: "sample3",
              title: "🎨 Digital Art Tutorial",
              streamer: {
                name: "ArtCreator",
                avatar:
                  "https://images.pexels.com/photos/1681010/pexels-photo-1681010.jpeg?auto=compress&cs=tinysrgb&w=100&h=100&fit=crop&crop=face",
              },
              viewers: 67,
              thumbnail:
                "https://images.pexels.com/photos/1143754/pexels-photo-1143754.jpeg?auto=compress&cs=tinysrgb&w=350&h=200&fit=crop",
            },
          ];

          container.innerHTML = sampleStreams
            .map(
              (stream) => `
                    <div class="stream-card">
                        <a href="stream.html?id=${stream.id}">
                            <div class="stream-card-thumbnail">
                                <img src="${stream.thumbnail}" alt="Stream Thumbnail">
                                <span class="live-badge">🔴 LIVE</span>
                                <span class="viewer-count">👁️ ${stream.viewers}</span>
                            </div>
                            <div class="stream-card-info">
                                <h3>${stream.title}</h3>
                                <div class="streamer-info">
                                    <img src="${stream.streamer.avatar}" alt="${stream.streamer.name}">
                                    <span>${stream.streamer.name}</span>
                                </div>
                            </div>
                        </a>
                    </div>
                `,
            )
            .join("");

          noStreamsMessage.style.display = "none";
        } else {
          container.innerHTML = liveStreams
            .map(
              (stream) => `
                    <div class="stream-card">
                        <a href="stream.html?id=${stream.id}">
                            <div class="stream-card-thumbnail">
                                <img src="${stream.thumbnail}" alt="Stream Thumbnail">
                                <span class="live-badge">🔴 LIVE</span>
                                <span class="viewer-count">👁️ ${stream.viewers}</span>
                            </div>
                            <div class="stream-card-info">
                                <h3>${stream.title}</h3>
                                <div class="streamer-info">
                                    <img src="${stream.streamer.avatar}" alt="${stream.streamer.name}">
                                    <span>${stream.streamer.name}</span>
                                </div>
                            </div>
                        </a>
                    </div>
                `,
            )
            .join("");

          noStreamsMessage.style.display = "none";
        }
      }

      function loadRecentPosts() {
        const container = document.getElementById("recentPostsContainer");
        const posts = JSON.parse(localStorage.getItem("nabila_posts") || "[]");

        if (posts.length === 0) {
          container.innerHTML = `
                    <div class="no-posts-preview">
                        <div class="preview-icon">📝</div>
                        <h3>Belum ada post dari komunitas</h3>
                        <p>Jadilah yang pertama membuat konten menarik!</p>
                        <a href="posts.html" class="btn primary">🎨 Buat Post Pertama</a>
                    </div>
                `;
          return;
        }

        const recentPosts = posts.slice(0, 4);
        container.innerHTML = recentPosts
          .map(
            (post) => `
                <div class="post-preview-card">
                    <div class="post-preview-header">
                        <img src="${post.author.avatar}" alt="${post.author.name}" class="author-avatar-small">
                        <div>
                            <strong>${post.author.name}</strong>
                            <small>${new Date(post.created_at).toLocaleDateString("id-ID")}</small>
                        </div>
                    </div>
                    <h4>${post.title}</h4>
                    <p>${post.content.substring(0, 100)}${post.content.length > 100 ? "..." : ""}</p>
                    <div class="post-preview-stats">
                        <span>❤️ ${post.likes}</span>
                        <span>💬 ${post.comments.length}</span>
                        <span>👁️ ${post.views || 0}</span>
                    </div>
                </div>
            `,
          )
          .join("");
      }

      function loadPlatformStats() {
        const users = JSON.parse(localStorage.getItem("nabila_users") || "[]");
        const streams = JSON.parse(
          localStorage.getItem("nabila_streams") || "[]",
        );
        const posts = JSON.parse(localStorage.getItem("nabila_posts") || "[]");
        const onlineUsers = JSON.parse(
          localStorage.getItem("nabila_online") || "[]",
        );

        const liveStreams = streams.filter((s) => s.status === "live");
        const recentOnline = onlineUsers.filter(
          (u) => Date.now() - u.lastSeen < 5 * 60 * 1000,
        );

        // Animate numbers
        animateNumber("totalUsers", users.length);
        animateNumber("liveStreams", liveStreams.length);
        animateNumber("totalPosts", posts.length);
        animateNumber("onlineNow", recentOnline.length);
      }

      function animateNumber(elementId, targetNumber) {
        const element = document.getElementById(elementId);
        if (!element) return;

        let current = 0;
        const increment = targetNumber / 30;
        const timer = setInterval(() => {
          current += increment;
          if (current >= targetNumber) {
            current = targetNumber;
            clearInterval(timer);
          }
          element.textContent = Math.floor(current).toLocaleString();
        }, 50);
      }
    </script>

    <style>
      .hero-actions {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 30px;
        flex-wrap: wrap;
      }

      .shop-preview {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .shop-item-preview {
        background: var(--card-bg);
        padding: 20px;
        border-radius: 15px;
        border: 2px solid var(--border-color);
        display: flex;
        align-items: center;
        gap: 15px;
        transition: all 0.3s ease;
      }

      .shop-item-preview:hover {
        border-color: var(--secondary-color);
        transform: translateY(-3px);
      }

      .shop-item-preview .item-icon {
        font-size: 2.5rem;
      }

      .shop-item-preview .item-info {
        flex: 1;
      }

      .shop-item-preview h4 {
        color: var(--text-light);
        margin-bottom: 5px;
      }

      .shop-item-preview p {
        color: var(--text-dark);
        margin: 0;
        font-size: 0.9rem;
      }

      .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .feature-card {
        background: var(--card-bg);
        padding: 30px 25px;
        border-radius: 20px;
        border: 2px solid var(--border-color);
        text-align: center;
        transition: all 0.3s ease;
      }

      .feature-card:hover {
        border-color: var(--secondary-color);
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .feature-icon {
        font-size: 3rem;
        margin-bottom: 20px;
      }

      .feature-card h3 {
        color: var(--text-light);
        margin-bottom: 15px;
      }

      .feature-card p {
        color: var(--text-dark);
        margin-bottom: 20px;
        line-height: 1.5;
      }

      .footer-content {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 30px;
        margin-bottom: 30px;
      }

      .footer-section h4 {
        color: var(--text-light);
        margin-bottom: 15px;
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 8px;
      }

      .footer-section ul {
        list-style: none;
        padding: 0;
      }

      .footer-section li {
        margin-bottom: 8px;
      }

      .footer-section a {
        color: var(--text-dark);
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .footer-section a:hover {
        color: var(--secondary-color);
      }

      .footer-bottom {
        border-top: 2px solid var(--border-color);
        padding-top: 20px;
        text-align: center;
      }

      .no-posts-preview {
        text-align: center;
        padding: 60px 20px;
        background: var(--card-bg);
        border-radius: 20px;
        border: 2px solid var(--border-color);
      }

      .preview-icon {
        font-size: 4rem;
        margin-bottom: 20px;
      }

      .no-posts-preview h3 {
        color: var(--text-light);
        margin-bottom: 15px;
      }

      .no-posts-preview p {
        color: var(--text-dark);
        margin-bottom: 25px;
      }

      .btn.small {
        padding: 8px 16px;
        font-size: 0.9rem;
      }

      @media (max-width: 768px) {
        .hero-actions {
          flex-direction: column;
          align-items: center;
        }

        .shop-preview {
          grid-template-columns: 1fr;
        }

        .features-grid {
          grid-template-columns: 1fr;
        }

        .footer-content {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 480px) {
        .footer-content {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </body>
</html>
